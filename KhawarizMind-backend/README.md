# KhawarizMind backend services

This solution exposes lightweight mock services that unblock UI integration while real
platform components are implemented. All services rely on the shared `SharedAppStore`
from `DocumentManagementSystem.Common` to keep an in-memory view of workflows and AI
conversation logs.

## AIService
- `POST /api/ai/query` accepts prompts with optional history/metadata.
- Responses are generated by a deterministic simulator that emits JSON or server-sent
  events when `stream` is requested.
- Requests require the `ai.query` role (provide `X-Roles: ai.query` or a mapped bearer token).
- Limitations: no real model inference; outputs are static mock text.

## WorkflowService
- `GET /api/workflows` lists in-memory definitions ordered by `updatedAt`.
- `POST /api/workflows` creates a workflow using normalization helpers shared with the UI.
- `POST /api/workflows/{id}/activate` flips a workflow to `active` and records an activity entry.
- Role requirements: `workflow.viewer` for reads, `workflow.manager` for creation,
  and `workflow.admin` for activation.
- Limitations: all data is stored in-memory and is reset whenever the process restarts.

## Local smoke checks
A front-end smoke script (`npm run smoke` inside `KhawarizMind-frontend`) starts both
services with `dotnet run --no-build`, exercises the endpoints, and terminates the
processes. Run `dotnet build` beforehand so the script can launch quickly.
